function pixelGlass(){"use strict";function p(){m(),C(),"on"===s.state&&N()}function m(){var a=t.documentElement;if(k(t.body,"has-sticky-point")){var i=t.querySelector(".sticky-point");i&&!localStorage["pg-released"]&&(a=i),s.state="off"}e=t.createElement("div"),e.classList.add(r),a.appendChild(e);var n=["top","right","bottom","left"];n.forEach(function(t){var a=x(t,"");a&&(e.style[t]=a)}),d()}function d(){y(f),y(c),b(v),g()}function y(a){var o=(a.listName,a.itemName),l=a.elemTag,u=a.elemText,f=a.type,c=a.list,p=(a.action,s[o]),m=a.attrs,d=c.indexOf(p),y=a.canDisableAll,b=o,g=t.createElement(l);if(j(g,[r+"__control",r+"__control--"+f]),g.setAttribute("type",f),g.setAttribute("id",b),L(g,"state-num",d),m)for(var x in m)g.setAttribute(x,m[x]);"button"===l&&(g.innerHTML=u),y||i.push(g),e.appendChild(g),g.onclick=function(){a.target&&(d=+!d,p=c[d],L(g,"state-num",d),L(a.target.elem,o,p),E(o,p),y&&y===!0&&("off"===p?(S(),h()):(N(),A())))}}function b(a){var n=a.itemName,o=a.attrs,l=a.type,u=a.setAttr,f=a.canDisableAll,c=n,v=t.createElement("input");j(v,[r+"__control",r+"__control--"+l]),v.setAttribute("type",l),v.setAttribute("id",c);for(var p in o)v.setAttribute(p,o[p]);v.setAttribute("value",s[n]),f||i.push(v),e.appendChild(v),v.oninput=function(){"style"===u&&(a.target.elem.style[n]=this.value,E(n,this.value))}}function g(){var a=t.createElement("button");j(a,[r+"__control",r+"__control--drag-n-drop"]),a.setAttribute("type","button"),a.innerHTML=" ",e.appendChild(a),a.onmousedown=function(){var r=(this.offsetTop,e.clientWidth-this.clientWidth),i=getComputedStyle(e);e.style.top=i.top,e.style.left=i.left,e.style.right="auto",e.style.bottom="auto",t.onmousemove=function(t){var a=t.clientX-r+"px",i=t.clientY+"px";e.style.left=a,e.style.top=i}},a.onmouseup=function(){var a=getComputedStyle(e),r=+a.left.replace(/px/,""),i=+a.right.replace(/px/,""),n=+a.top.replace(/px/,""),o=+a.bottom.replace(/px/,"");r>i?(E("left","auto"),E("right",a.right),e.style.right=a.right,e.style.left="auto"):(E("left",a.left),E("right","auto")),n>o?(E("top","auto"),E("bottom",a.bottom),e.style.bottom=a.bottom,e.style.top="auto"):(E("top",a.top),E("bottom","auto")),t.onmousemove=null}}function h(){i.forEach(function(t){t.setAttribute("disabled","")})}function A(){i.forEach(function(t){t.removeAttribute("disabled")})}function x(t,e){var a=[n,t].join("-"),r=localStorage[a];return r?r:e}function E(t,e){var a=[n,t].join("-");localStorage[a]=e}function C(){for(var t in u){var e=u[t],a=s[t];"data"===e.attr&&L(e.elem,t,a)}"off"===s.state&&h()}function N(){for(var t in u){var e=u[t],a=s[t];"style"===e.attr&&(e.elem.style[t]=a)}}function S(){for(var t in u){var e=u[t];"style"===e.attr&&(e.elem.style[t]="")}}function k(t,e){return t?(e="data-"+e,void 0!==t.getAttribute(e)&&null!==t.getAttribute(e)?!0:!1):!1}function L(t,e,a){t&&(e="data-"+e,t.setAttribute(e,a))}function j(t,e){t&&e.length>0&&e.forEach(function(e){t.classList.add(e)})}var e,t=document,r="controls-panel",i=[],n="pg",o=["none","invert"],l=["off","on"],s={state:x("state",l[1]),filter:x("filter",o[0]),opacity:x("opacity",.5)},u={state:{elem:t.documentElement,attr:"data"},filter:{elem:t.body,attr:"data"},opacity:{elem:t.body,attr:"style"}},f={elemTag:"button",elemText:"on",listName:"states",itemName:"state",target:u.state,type:"button",list:l,canDisableAll:!0,attrs:{tabindex:1}},c={elemTag:"button",elemText:"invert",listName:"filters",itemName:"filter",target:u.filter,type:"button",list:o,attrs:{tabindex:2}},v={itemName:"opacity",type:"number",target:u.opacity,setAttr:"style",attrs:{min:0,max:1,step:.1,tabindex:3}};p()}window.onload=function(){pixelGlass()};